DrUPC
===

在没有图形界面的情况下通过 UPC/校园网的认证。

Q: 既然石油大学的网络认证是网页认证，不需要什么客户端，那么为什么还写这个东西呢？

A: 此脚本专门给那些`没有图形界面`的 Linux 系统用的，特别是`嵌入式 Linux 系统`。可用此脚本方便地登录网号，特别是在举行室外展示活动的时候……当然也可以用于平时偷懒。

Q: 为什么提示语都是英文的？

A: 万一纯文本模式不支持中文怎么办？

# 石油大学的网络

目前（2015 年）石油大学应该有以下几种网络：

* 校园网（宿舍）：直接插网线，通过网页认证。
* 联通网（宿舍）：直接插网线，通过 PPPoE 认证。
* 电信网（宿舍）：直接插网线，通过 PPPoE 认证。
* 移动网（宿舍）：连接 CMCC-EDU 热点，通过网页认证。需要中国移动 WLAN 套餐。
* 移动网（体育馆）：连接 CMCC。不需要校园账号认证。
* UPC（教室、图书馆和室外）：连接 UPC，通过网页认证。上课时间拒绝连接。
* UPC-Mobile（教室、图书馆和室外）：802.11 认证，上课时间拒绝连接。
* UPC-Local（教室、图书馆和室外）：网页认证（与 UPC 不同），虽然上课时间能连接而且不用掏钱，但是因为只能访问校内部分资源，而且不能挂代理，所以基本上没有用。
* eduroam：只有认识中国科学技术大学等地方的同学，拿到他们的账号之后才能用。
* 办公网（办公室）：网页认证。与宿舍不同的是，认证服务器为 222.195.191.231（宿舍是 230）。

只要给学校刷了 20 块钱，不管你是什么网，校园网和 UPC 总是能用的。

本脚本支持校园网和 UPC。

# 基本用法

如果你的 Linux 系统有图形界面，那么不用往下看了。

对于嵌入式系统，首先，你需要有 Python。

## 连接到校园网/UPC

首先要连接到校园网或 UPC。

如果是宿舍的校园网，那么直接插网线就好。

如果是 UPC，则需要借助一些命令来连接。在 Ubuntu 下命令应该类似于：

	iwconfig wlan0 essid UPC

若系统使用 NetworkManager，那么命令应该类似于：

	nmcli dev wifi connect UPC

## 使用脚本认证

假如 DrUPC.py 在当前目录。

1. 假如学号是“1401010101”，密码是“123456”，那么用以下命令连接：
		
		python DrUPC.py --login --user=1401010101 --pass=123456
		
	感觉好像泄密了？直接输入
	
		python DrUPC.py --login
		
	然后程序会问你学号和密码。
	
2. 网号被占用，如何强制离线？输入：

		python DrUPC.py --kill --user=1401010101 --pass=123456
		
	也可以不输账号密码。程序也会主动问你。
	
	不过你可能更愿意加个 --login，强制下线之后直接登：

		python DrUPC.py --login --kill --user=1401010101 --pass=123456

3. 如何下线？

		python DrUPC.py --logout
		
4. 到底上没上网？最好的办法是去 Ping 百度。也可以

		python DrUPC.py --status
		
# 偷懒用法

此脚本可以给有 Python 的系统使用（Linux/Mac 自带，Windows 需要自己装）。如果每次开机都得敲网号，感觉很麻烦，不妨试试把这个脚本设置成自动启动。
